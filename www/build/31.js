webpackJsonp([31],{234:function(l,n,u){"use strict";function t(l){return o._29(0,[(l()(),o._6(0,null,null,21,"div",[["class","message"]],[[2,"left",null],[2,"right",null]],null,null,null,null)),(l()(),o._27(null,["\n            "])),(l()(),o._6(0,null,null,0,"img",[["alt",""],["class","user-img"],["src","https://avatars2.githubusercontent.com/u/11835988?v=3&u=2a181779eb2164666606366a1df31f9c17cf7a20&s=100"]],null,null,null,null,null)),(l()(),o._27(null,["\n\n            "])),(l()(),o._6(0,null,null,16,"div",[["class","msg-detail"]],null,null,null,null,null)),(l()(),o._27(null,["\n                "])),(l()(),o._6(0,null,null,5,"div",[["class","msg-info"]],null,null,null,null,null)),(l()(),o._27(null,["\n                    "])),(l()(),o._6(0,null,null,2,"p",[],null,null,null,null,null)),(l()(),o._27(null,["",""])),o._23(1),(l()(),o._27(null,["\n                "])),(l()(),o._27(null,["\n                "])),(l()(),o._6(0,null,null,6,"div",[["class","msg-content"]],null,null,null,null,null)),(l()(),o._27(null,["\n                    "])),(l()(),o._6(0,null,null,0,"span",[["class","triangle"]],null,null,null,null,null)),(l()(),o._27(null,["\n                    "])),(l()(),o._6(0,null,null,1,"p",[["class","line-breaker "]],null,null,null,null,null)),(l()(),o._27(null,["",""])),(l()(),o._27(null,["\n                "])),(l()(),o._27(null,["\n            "])),(l()(),o._27(null,["\n        "]))],null,function(l,n){l(n,0,0,""!=n.context.$implicit.targetId,""==n.context.$implicit.targetId),l(n,9,0,o._28(n,9,0,l(n,10,0,o._20(n.parent,0),n.context.$implicit.sentTime))),l(n,18,0,n.context.$implicit.content.content)})}function e(l){return o._29(0,[o._21(0,w.d,[o.u]),o._25(402653184,1,{content:0}),o._25(402653184,2,{messageInput:0}),(l()(),o._27(null,["\n"])),(l()(),o._6(0,null,null,10,"ion-header",[["no-border",""]],[[2,"idark",null]],[[null,"tap"]],function(l,n,u){var t=!0;return"tap"===n&&(t=!1!==l.component.tapEvent(u)&&t),t},null,null)),o._4(16384,null,0,T.a,[B.a,o.k,o.E,[2,N.a]],null,null),(l()(),o._27(null,["\n\n    "])),(l()(),o._6(0,null,null,6,"ion-navbar",[["class","toolbar"],["color","mblue"]],[[8,"hidden",0],[2,"statusbar-padding",null]],null,null,S.b,S.a)),o._4(49152,null,0,K.a,[P.a,[2,N.a],[2,F.a],B.a,o.k,o.E],{color:[0,"color"]},null),(l()(),o._27(3,["\n        "])),(l()(),o._6(0,null,3,2,"ion-title",[],null,null,null,L.b,L.a)),o._4(49152,null,0,U.a,[B.a,o.k,o.E,[2,$.a],[2,K.a]],null,null),(l()(),o._27(0,["",""])),(l()(),o._27(3,["\n    "])),(l()(),o._27(null,["\n\n"])),(l()(),o._27(null,["\n\n\n"])),(l()(),o._6(0,null,null,8,"ion-content",[],[[2,"idark_content",null],[2,"statusbar-padding",null],[2,"has-refresher",null]],null,null,R.b,R.a)),o._4(4374528,[[1,4]],0,V.a,[B.a,A.a,D.a,o.k,o.E,P.a,H.a,o.y,[2,N.a],[2,F.a]],null,null),(l()(),o._27(1,["\n    "])),(l()(),o._6(0,null,1,4,"div",[["class","message-wrap"]],null,null,null,null,null)),(l()(),o._27(null,["\n\n        "])),(l()(),o._0(16777216,null,null,1,null,t)),o._4(802816,null,0,w.i,[o.O,o.K,o.s],{ngForOf:[0,"ngForOf"]},null),(l()(),o._27(null,["\n\n    "])),(l()(),o._27(1,["\n\n"])),(l()(),o._27(null,["\n\n"])),(l()(),o._6(0,null,null,31,"ion-footer",[["no-border",""]],[[2,"idark",null]],null,null,null,null)),o._4(16384,null,0,J.a,[B.a,o.k,o.E,[2,N.a]],null,null),(l()(),o._27(null,["\n    "])),(l()(),o._6(0,null,null,27,"ion-grid",[["class","input-wrap grid"]],null,null,null,null,null)),o._4(16384,null,0,Y.a,[],null,null),(l()(),o._27(null,["\n        "])),(l()(),o._6(0,null,null,23,"ion-row",[["class","row"]],null,null,null,null,null)),o._4(16384,null,0,q.a,[],null,null),(l()(),o._27(null,["\n\n            "])),(l()(),o._6(0,null,null,8,"ion-col",[["class","col"],["col-10",""]],null,null,null,null,null)),o._4(16384,null,0,z.a,[],null,null),(l()(),o._27(null,["\n                "])),(l()(),o._6(0,null,null,4,"ion-textarea",[["placeholder","说点什么..."]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"keyup.enter"],[null,"focus"]],function(l,n,u){var t=!0,e=l.component;return"ngModelChange"===n&&(t=!1!==(e.editorMsg=u)&&t),"keyup.enter"===n&&(t=!1!==e.sendMsg()&&t),"focus"===n&&(t=!1!==e.scrollToBottom()&&t),t},G.b,G.a)),o._4(671744,null,0,Q.h,[[8,null],[8,null],[8,null],[8,null]],{model:[0,"model"]},{update:"ngModelChange"}),o._24(2048,null,Q.f,null,[Q.h]),o._4(16384,null,0,Q.g,[Q.f],null,null),o._4(5423104,[[2,4],["chat_input",4]],0,W.a,[B.a,A.a,X.a,P.a,o.k,o.E,[2,V.a],[2,Z.a],[2,Q.f],D.a],{placeholder:[0,"placeholder"]},{focus:"focus"}),(l()(),o._27(null,["\n            "])),(l()(),o._27(null,["\n            "])),(l()(),o._6(0,null,null,9,"ion-col",[["class","col"],["col-2",""]],null,null,null,null,null)),o._4(16384,null,0,z.a,[],null,null),(l()(),o._27(null,["\n                "])),(l()(),o._6(0,null,null,5,"button",[["clear",""],["icon-only",""],["ion-button",""],["item-right",""]],null,[[null,"click"]],function(l,n,u){var t=!0;return"click"===n&&(t=!1!==l.component.sendMsg()&&t),t},ll.b,ll.a)),o._4(1097728,null,0,nl.a,[[8,""],B.a,o.k,o.E],{clear:[0,"clear"]},null),(l()(),o._27(0,["\n          "])),(l()(),o._6(0,null,0,1,"ion-icon",[["ios","ios-send"],["md","md-send"],["name","ios-send"],["role","img"]],[[2,"hide",null]],null,null,null,null)),o._4(147456,null,0,ul.a,[B.a,o.k,o.E],{name:[0,"name"],ios:[1,"ios"],md:[2,"md"]},null),(l()(),o._27(0,["\n        "])),(l()(),o._27(null,["\n            "])),(l()(),o._27(null,["\n        "])),(l()(),o._27(null,["\n    "])),(l()(),o._27(null,["\n"]))],function(l,n){var u=n.component;l(n,8,0,"mblue"),l(n,22,0,u.msgList),l(n,39,0,u.editorMsg);l(n,42,0,"说点什么...");l(n,49,0,"");l(n,52,0,"ios-send","ios-send","md-send")},function(l,n){var u=n.component;l(n,4,0,u.isIdark),l(n,7,0,o._20(n,8)._hidden,o._20(n,8)._sbPadding),l(n,12,0,u.targetName),l(n,16,0,u.isIdark,o._20(n,17).statusbarPadding,o._20(n,17)._hasRefresher),l(n,26,0,u.isIdark),l(n,38,0,o._20(n,41).ngClassUntouched,o._20(n,41).ngClassTouched,o._20(n,41).ngClassPristine,o._20(n,41).ngClassDirty,o._20(n,41).ngClassValid,o._20(n,41).ngClassInvalid,o._20(n,41).ngClassPending),l(n,51,0,o._20(n,52)._hidden)})}Object.defineProperty(n,"__esModule",{value:!0});var o=u(0),a=u(4),s=u(72),c=u(52),i=u(78),r=function(){function l(l,n,u,t,e,o){var a=this;this.rc=l,this.events=n,this.ref=u,this.UserService=t,this.navCtrl=e,this.navParams=o,this.msgList=[],this.editorMsg="",this.isIdark=this.UserService.isIdark,this.targetId=o.get("targetId"),this.targetName=o.get("targetName"),this.eventSub=this.rc.rong_data.subscribe(function(l){a.pushNewMsg(l)}),this.rc.getConversation(this.targetId).then(function(l){"0"!=l.unreadMessageCount&&a.rc.getRemoteHistoryMessages(a.targetId,l.unreadMessageCount).then(function(l){l.hasMsg&&(a.msgList=l.list,a.rc.clearMessagesUnreadStatus(a.targetId))})})}return l.prototype.ionViewCanLeave=function(){this.eventSub&&this.eventSub.unsubscribe()},l.prototype.sendMsg=function(){var l=this;this.editorMsg.length>0&&this.rc.sendTextMessage(this.targetId,this.editorMsg).then(function(n){n.targetId="",l.pushNewMsg(n),l.editorMsg=""}).catch(function(l){alert(l)})},l.prototype.pushNewMsg=function(l){this.msgList.push(l),this.scrollToBottom()},l.prototype.scrollToBottom=function(){this.content.scrollToBottom&&this.content.scrollToBottom()},l.prototype.tapEvent=function(l){this.content.scrollToTop()},l}();Object(a.__decorate)([Object(o.N)(s.c),Object(a.__metadata)("design:type","function"==typeof(_=void 0!==s.c&&s.c)&&_||Object)],r.prototype,"content",void 0),Object(a.__decorate)([Object(o.N)("chat_input"),Object(a.__metadata)("design:type","function"==typeof(d=void 0!==s.o&&s.o)&&d||Object)],r.prototype,"messageInput",void 0),r=Object(a.__decorate)([Object(o.i)({selector:"page-chat",templateUrl:"chat.html"}),Object(a.__metadata)("design:paramtypes",["function"==typeof(p=void 0!==i.a&&i.a)&&p||Object,"function"==typeof(g=void 0!==s.d&&s.d)&&g||Object,"function"==typeof(b=void 0!==o.g&&o.g)&&b||Object,"function"==typeof(f=void 0!==c.a&&c.a)&&f||Object,"function"==typeof(h=void 0!==s.j&&s.j)&&h||Object,"function"==typeof(m=void 0!==s.l&&s.l)&&m||Object])],r);var _,d,p,g,b,f,h,m,k=function(){return function(){}}();k=Object(a.__decorate)([Object(o.v)({declarations:[r],imports:[s.h.forChild(r)],exports:[r]})],k);var v=u(191),y=u(192),C=u(193),I=u(194),x=u(195),j=u(196),O=u(197),E=u(198),M=u(199),w=u(16),T=u(119),B=u(1),N=u(5),S=u(281),K=u(39),P=u(8),F=u(20),L=u(282),U=u(117),$=u(53),R=u(280),V=u(21),A=u(3),D=u(9),H=u(33),J=u(126),Y=u(130),q=u(123),z=u(122),G=u(288),Q=u(17),W=u(120),X=u(14),Z=u(18),ll=u(40),nl=u(19),ul=u(41),tl=u(82),el=u(10),ol=o._3({encapsulation:2,styles:[],data:{}}),al=o._1("page-chat",r,function(l){return o._29(0,[(l()(),o._6(0,null,null,1,"page-chat",[],null,null,null,e,ol)),o._4(49152,null,0,r,[i.a,tl.a,o.g,c.a,F.a,el.a],null,null)],null,null)},{},{},[]),sl=u(118),cl=u(34);u.d(n,"ChatPageModuleNgFactory",function(){return il});var il=o._2(k,[],function(l){return o._17([o._18(512,o.j,o.Y,[[8,[v.a,y.a,C.a,I.a,x.a,j.a,O.a,E.a,M.a,al]],[3,o.j],o.w]),o._18(4608,w.l,w.k,[o.u]),o._18(4608,Q.k,Q.k,[]),o._18(4608,Q.c,Q.c,[]),o._18(512,w.b,w.b,[]),o._18(512,Q.j,Q.j,[]),o._18(512,Q.d,Q.d,[]),o._18(512,Q.i,Q.i,[]),o._18(512,sl.a,sl.a,[]),o._18(512,sl.b,sl.b,[]),o._18(512,k,k,[]),o._18(256,cl.a,r,[])])})},280:function(l,n,u){"use strict";function t(l){return e._29(2,[e._25(402653184,1,{_fixedContent:0}),e._25(402653184,2,{_scrollContent:0}),(l()(),e._6(0,[[1,0],["fixedContent",1]],null,1,"div",[["class","fixed-content"]],null,null,null,null,null)),e._19(null,0),(l()(),e._6(0,[[2,0],["scrollContent",1]],null,1,"div",[["class","scroll-content"]],null,null,null,null,null)),e._19(null,1),e._19(null,2)],null,null)}u.d(n,"a",function(){return o}),n.b=t;var e=u(0),o=(u(21),u(1),u(3),u(9),u(8),u(33),u(5),u(20),e._3({encapsulation:2,styles:[],data:{}}))},281:function(l,n,u){"use strict";function t(l){return e._29(0,[(l()(),e._6(0,null,null,1,"div",[["class","toolbar-background"]],null,null,null,null,null)),e._4(278528,null,0,o.h,[e.s,e.t,e.k,e.E],{klass:[0,"klass"],ngClass:[1,"ngClass"]},null),(l()(),e._6(0,null,null,8,"button",[["class","back-button"],["ion-button","bar-button"]],[[8,"hidden",0]],[[null,"click"]],function(l,n,u){var t=!0;return"click"===n&&(t=!1!==l.component.backButtonClick(u)&&t),t},a.b,a.a)),e._4(278528,null,0,o.h,[e.s,e.t,e.k,e.E],{klass:[0,"klass"],ngClass:[1,"ngClass"]},null),e._4(1097728,null,0,s.a,[[8,"bar-button"],c.a,e.k,e.E],null,null),(l()(),e._6(0,null,0,2,"ion-icon",[["class","back-button-icon"],["role","img"]],[[2,"hide",null]],null,null,null,null)),e._4(278528,null,0,o.h,[e.s,e.t,e.k,e.E],{klass:[0,"klass"],ngClass:[1,"ngClass"]},null),e._4(147456,null,0,i.a,[c.a,e.k,e.E],{name:[0,"name"]},null),(l()(),e._6(0,null,0,2,"span",[["class","back-button-text"]],null,null,null,null,null)),e._4(278528,null,0,o.h,[e.s,e.t,e.k,e.E],{klass:[0,"klass"],ngClass:[1,"ngClass"]},null),(l()(),e._27(null,["",""])),e._19(null,0),e._19(null,1),e._19(null,2),(l()(),e._6(0,null,null,2,"div",[["class","toolbar-content"]],null,null,null,null,null)),e._4(278528,null,0,o.h,[e.s,e.t,e.k,e.E],{klass:[0,"klass"],ngClass:[1,"ngClass"]},null),e._19(null,3)],function(l,n){var u=n.component;l(n,1,0,"toolbar-background","toolbar-background-"+u._mode);l(n,3,0,"back-button","back-button-"+u._mode);l(n,6,0,"back-button-icon","back-button-icon-"+u._mode),l(n,7,0,u._bbIcon);l(n,9,0,"back-button-text","back-button-text-"+u._mode);l(n,15,0,"toolbar-content","toolbar-content-"+u._mode)},function(l,n){var u=n.component;l(n,2,0,u._hideBb),l(n,5,0,e._20(n,7)._hidden),l(n,10,0,u._backText)})}u.d(n,"a",function(){return r}),n.b=t;var e=u(0),o=u(16),a=(u(39),u(40)),s=u(19),c=u(1),i=u(41),r=(u(8),u(5),u(20),e._3({encapsulation:2,styles:[],data:{}}))},282:function(l,n,u){"use strict";function t(l){return e._29(2,[(l()(),e._6(0,null,null,2,"div",[["class","toolbar-title"]],null,null,null,null,null)),e._4(278528,null,0,o.h,[e.s,e.t,e.k,e.E],{klass:[0,"klass"],ngClass:[1,"ngClass"]},null),e._19(null,0)],function(l,n){l(n,1,0,"toolbar-title","toolbar-title-"+n.component._mode)},null)}u.d(n,"a",function(){return a}),n.b=t;var e=u(0),o=u(16),a=(u(117),u(1),u(53),u(39),e._3({encapsulation:2,styles:[],data:{}}))},288:function(l,n,u){"use strict";function t(l){return c._29(0,[(l()(),c._6(0,[[1,0],["textInput",1]],null,1,"input",[["class","text-input"],["dir","auto"]],[[8,"type",0],[1,"aria-labelledby",0],[1,"min",0],[1,"max",0],[1,"step",0],[1,"autocomplete",0],[1,"autocorrect",0],[8,"placeholder",0],[8,"disabled",0],[8,"readOnly",0]],[[null,"input"],[null,"blur"],[null,"focus"],[null,"keydown"]],function(l,n,u){var t=!0,e=l.component;return"input"===n&&(t=!1!==e.onInput(u)&&t),"blur"===n&&(t=!1!==e.onBlur(u)&&t),"focus"===n&&(t=!1!==e.onFocus(u)&&t),"keydown"===n&&(t=!1!==e.onKeydown(u)&&t),t},null,null)),c._4(278528,null,0,i.h,[c.s,c.t,c.k,c.E],{klass:[0,"klass"],ngClass:[1,"ngClass"]},null)],function(l,n){l(n,1,0,"text-input","text-input-"+n.component._mode)},function(l,n){var u=n.component;l(n,0,0,u._type,u._labelId,u.min,u.max,u.step,u.autocomplete,u.autocorrect,u.placeholder,u._disabled,u._readonly)})}function e(l){return c._29(0,[(l()(),c._6(0,[[1,0],["textInput",1]],null,1,"textarea",[["class","text-input"]],[[1,"aria-labelledby",0],[1,"autocomplete",0],[1,"autocorrect",0],[8,"placeholder",0],[8,"disabled",0],[8,"readOnly",0]],[[null,"input"],[null,"blur"],[null,"focus"],[null,"keydown"]],function(l,n,u){var t=!0,e=l.component;return"input"===n&&(t=!1!==e.onInput(u)&&t),"blur"===n&&(t=!1!==e.onBlur(u)&&t),"focus"===n&&(t=!1!==e.onFocus(u)&&t),"keydown"===n&&(t=!1!==e.onKeydown(u)&&t),t},null,null)),c._4(278528,null,0,i.h,[c.s,c.t,c.k,c.E],{klass:[0,"klass"],ngClass:[1,"ngClass"]},null)],function(l,n){l(n,1,0,"text-input","text-input-"+n.component._mode)},function(l,n){var u=n.component;l(n,0,0,u._labelId,u.autocomplete,u.autocorrect,u.placeholder,u._disabled,u._readonly)})}function o(l){return c._29(0,[(l()(),c._6(0,null,null,1,"button",[["class","text-input-clear-icon"],["clear",""],["ion-button",""],["tabindex","-1"],["type","button"]],null,[[null,"click"],[null,"mousedown"]],function(l,n,u){var t=!0,e=l.component;return"click"===n&&(t=!1!==e.clearTextInput(u)&&t),"mousedown"===n&&(t=!1!==e.clearTextInput(u)&&t),t},r.b,r.a)),c._4(1097728,null,0,_.a,[[8,""],d.a,c.k,c.E],{clear:[0,"clear"]},null)],function(l,n){l(n,1,0,"")},null)}function a(l){return c._29(0,[(l()(),c._6(0,null,null,0,"div",[["class","input-cover"]],null,[[null,"touchstart"],[null,"touchend"],[null,"mousedown"],[null,"mouseup"]],function(l,n,u){var t=!0,e=l.component;return"touchstart"===n&&(t=!1!==e._pointerStart(u)&&t),"touchend"===n&&(t=!1!==e._pointerEnd(u)&&t),"mousedown"===n&&(t=!1!==e._pointerStart(u)&&t),"mouseup"===n&&(t=!1!==e._pointerEnd(u)&&t),t},null,null))],null,null)}function s(l){return c._29(2,[c._25(671088640,1,{_native:0}),(l()(),c._0(16777216,null,null,1,null,t)),c._4(16384,null,0,i.j,[c.O,c.K],{ngIf:[0,"ngIf"]},null),(l()(),c._0(16777216,null,null,1,null,e)),c._4(16384,null,0,i.j,[c.O,c.K],{ngIf:[0,"ngIf"]},null),(l()(),c._0(16777216,null,null,1,null,o)),c._4(16384,null,0,i.j,[c.O,c.K],{ngIf:[0,"ngIf"]},null),(l()(),c._0(16777216,null,null,1,null,a)),c._4(16384,null,0,i.j,[c.O,c.K],{ngIf:[0,"ngIf"]},null)],function(l,n){var u=n.component;l(n,2,0,!u._isTextarea),l(n,4,0,u._isTextarea),l(n,6,0,u._clearInput),l(n,8,0,u._useAssist)},null)}u.d(n,"a",function(){return p}),n.b=s;var c=u(0),i=u(16),r=u(40),_=u(19),d=u(1),p=(u(120),u(3),u(14),u(8),u(21),u(18),u(17),u(9),c._3({encapsulation:2,styles:[],data:{}}))}});