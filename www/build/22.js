webpackJsonp([22],{273:function(n,t,l){"use strict";function e(n){return a._29(0,[(n()(),a._6(0,null,null,0,"div",[["class","imgs"]],[[4,"background",null]],[[null,"press"]],function(n,t,l){var e=!0;return"press"===t&&(e=!1!==n.component.pressEvent(n.context.index)&&e),e},null,null))],null,function(n,t){n(t,0,0,"url("+t.context.$implicit+")")})}function u(n){return a._29(0,[(n()(),a._27(null,["\n"])),(n()(),a._6(0,null,null,19,"ion-header",[["no-border",""]],[[2,"idark",null]],null,null,null,null)),a._4(16384,null,0,S.a,[F.a,a.k,a.E,[2,A.a]],null,null),(n()(),a._27(null,["\n\n    "])),(n()(),a._6(0,null,null,15,"ion-navbar",[["class","toolbar"],["color","mblue"]],[[8,"hidden",0],[2,"statusbar-padding",null]],null,null,P.b,P.a)),a._4(49152,null,0,U.a,[D.a,[2,A.a],[2,N.a],F.a,a.k,a.E],{color:[0,"color"]},null),(n()(),a._27(3,["\n        "])),(n()(),a._6(0,null,3,2,"ion-title",[],null,null,null,L.b,L.a)),a._4(49152,null,0,B.a,[F.a,a.k,a.E,[2,M.a],[2,U.a]],null,null),(n()(),a._27(0,["发布分享"])),(n()(),a._27(3,["\n        "])),(n()(),a._6(0,null,2,7,"ion-buttons",[["end",""]],null,[[null,"click"]],function(n,t,l){var e=!0;return"click"===t&&(e=!1!==n.component.send()&&e),e},null,null)),a._4(16384,null,1,W.a,[F.a,a.k,a.E,[2,M.a],[2,U.a]],null,null),a._25(603979776,1,{_buttons:1}),(n()(),a._27(null,["\n            "])),(n()(),a._6(0,null,null,2,"ion-title",[],null,null,null,L.b,L.a)),a._4(49152,null,0,B.a,[F.a,a.k,a.E,[2,M.a],[2,U.a]],null,null),(n()(),a._27(0,["发送"])),(n()(),a._27(null,["\n        "])),(n()(),a._27(3,["\n    "])),(n()(),a._27(null,["\n\n"])),(n()(),a._27(null,["\n\n"])),(n()(),a._6(0,null,null,13,"ion-content",[["padding",""]],[[2,"idark_content",null],[2,"statusbar-padding",null],[2,"has-refresher",null]],null,null,K.b,K.a)),a._4(4374528,null,0,V.a,[F.a,J.a,G.a,a.k,a.E,D.a,H.a,a.y,[2,A.a],[2,N.a]],null,null),(n()(),a._27(1,["\n    "])),(n()(),a._6(0,null,1,4,"ion-textarea",[["placeholder","这一刻的想法..."]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"]],function(n,t,l){var e=!0;return"ngModelChange"===t&&(e=!1!==(n.component.text=l)&&e),e},Y.b,Y.a)),a._4(671744,null,0,q.h,[[8,null],[8,null],[8,null],[8,null]],{model:[0,"model"]},{update:"ngModelChange"}),a._24(2048,null,q.f,null,[q.h]),a._4(16384,null,0,q.g,[q.f],null,null),a._4(5423104,null,0,z.a,[F.a,J.a,$.a,D.a,a.k,a.E,[2,V.a],[2,Q.a],[2,q.f],G.a],{placeholder:[0,"placeholder"]},null),(n()(),a._27(1,["\n\n    "])),(n()(),a._0(16777216,null,1,1,null,e)),a._4(802816,null,0,X.i,[a.O,a.K,a.s],{ngForOf:[0,"ngForOf"]},null),(n()(),a._27(1,["\n\n    "])),(n()(),a._6(0,null,1,0,"div",[["class","imgs"]],[[8,"hidden",0],[4,"background",null]],[[null,"click"]],function(n,t,l){var e=!0;return"click"===t&&(e=!1!==n.component.presentActionSheet()&&e),e},null,null)),(n()(),a._27(1,["\n\n"]))],function(n,t){var l=t.component;n(t,5,0,"mblue"),n(t,26,0,l.text);n(t,29,0,"这一刻的想法..."),n(t,32,0,l.items)},function(n,t){var l=t.component;n(t,1,0,l.isIdark),n(t,4,0,a._20(t,5)._hidden,a._20(t,5)._sbPadding),n(t,22,0,l.isIdark,a._20(t,23).statusbarPadding,a._20(t,23)._hasRefresher),n(t,25,0,a._20(t,28).ngClassUntouched,a._20(t,28).ngClassTouched,a._20(t,28).ngClassPristine,a._20(t,28).ngClassDirty,a._20(t,28).ngClassValid,a._20(t,28).ngClassInvalid,a._20(t,28).ngClassPending);n(t,34,0,l.ishide,"url(assets/icon/addimg.png)")})}Object.defineProperty(t,"__esModule",{value:!0});var a=l(0),o=l(4),r=l(72),i=l(295),s=l(286),c=l(52),d=l(38),_=function(){function n(n,t,l,e,u,a,o,r){this.http=n,this.transfer=t,this.navCtrl=l,this.navParams=e,this.actionSheetCtrl=u,this.camera=a,this.alertCtrl=o,this.UserService=r,this.ishide=!1,this.text="",this.items=[],this.postimg=[],this.isIdark=this.UserService.isIdark,this.fileTransfer=this.transfer.create()}return n.prototype.send=function(){alert("后台正在开发，暂时停止发布功能")},n.prototype.postdata=function(){var n=this;this.UserService.presentLoadingDefault();var t=new d.d;t.append("Content-Type","application/x-www-form-urlencoded"),this.http.post("https://www.devonhello.com/chihu2/send_share","uid="+this.UserService._user._id+"&name="+this.UserService._user.nickname+"&userimg="+this.UserService._user.userimg+"&img="+JSON.stringify(this.postimg)+"&text="+this.text,{headers:t}).subscribe(function(t){n.UserService.presentLoadingDismiss(),"1"==t.json().result.ok&&n.navCtrl.pop()})},n.prototype.up=function(n){var t=this;this.UserService.presentLoadingDefault(),this.fileTransfer.upload(n,"https://www.devonhello.com/chihu2/upload",{}).then(function(n){var l=JSON.parse(n.response);t.postimg.push(l),t.items.push(l.src),t.UserService.presentLoadingDismiss()},function(n){t.UserService.presentLoadingDismiss(),alert("err")})},n.prototype.pressEvent=function(n){this.showConfirm(n)},n.prototype.showConfirm=function(n){var t=this;this.alertCtrl.create({title:"提示",message:"是否删除此照片?",buttons:[{text:"在想想",handler:function(){console.log("Disagree clicked")}},{text:"确定",handler:function(){t.items.splice(n,1),t.postimg.splice(n,1),t.items.length<4&&(t.ishide=!1)}}]}).present()},n.prototype.presentActionSheet=function(){var n=this;this.actionSheetCtrl.create({title:"图片来源",buttons:[{text:"相册",icon:"images",handler:function(){n.seleImgType(0)}},{text:"相机",icon:"camera",handler:function(){n.seleImgType(1)}},{text:"取消",role:"cancel",handler:function(){}}]}).present()},n.prototype.seleImgType=function(n){var t=this;this.camera.getPicture({quality:80,allowEdit:!0,sourceType:n,correctOrientation:!0}).then(function(n){t.up(n),t.items.length>=4&&(t.ishide=!0)},function(n){})},n}();_=Object(o.__decorate)([Object(a.i)({selector:"page-send-share",templateUrl:"send-share.html"}),Object(o.__metadata)("design:paramtypes",["function"==typeof(p=void 0!==d.e&&d.e)&&p||Object,"function"==typeof(b=void 0!==s.a&&s.a)&&b||Object,"function"==typeof(f=void 0!==r.j&&r.j)&&f||Object,"function"==typeof(g=void 0!==r.l&&r.l)&&g||Object,"function"==typeof(m=void 0!==r.a&&r.a)&&m||Object,"function"==typeof(h=void 0!==i.a&&i.a)&&h||Object,"function"==typeof(O=void 0!==r.b&&r.b)&&O||Object,"function"==typeof(y=void 0!==c.a&&c.a)&&y||Object])],_);var p,b,f,g,m,h,O,y,v=function(){return function(){}}();v=Object(o.__decorate)([Object(a.v)({declarations:[_],imports:[r.h.forChild(_)],exports:[_],providers:[i.a,s.a,s.b]})],v);var k=l(191),j=l(192),C=l(193),x=l(194),I=l(195),E=l(196),w=l(197),T=l(198),R=l(199),S=l(119),F=l(1),A=l(5),P=l(281),U=l(39),D=l(8),N=l(20),L=l(282),B=l(117),M=l(53),W=l(125),K=l(280),V=l(21),J=l(3),G=l(9),H=l(33),Y=l(288),q=l(17),z=l(120),$=l(14),Q=l(18),X=l(16),Z=l(10),nn=l(80),tn=l(77),ln=a._3({encapsulation:2,styles:[],data:{}}),en=a._1("page-send-share",_,function(n){return a._29(0,[(n()(),a._6(0,null,null,1,"page-send-share",[],null,null,null,u,ln)),a._4(49152,null,0,_,[d.e,s.a,N.a,Z.a,nn.a,i.a,tn.a,c.a],null,null)],null,null)},{},{},[]),un=l(118),an=l(34);l.d(t,"SendSharePageModuleNgFactory",function(){return on});var on=a._2(v,[],function(n){return a._17([a._18(512,a.j,a.Y,[[8,[k.a,j.a,C.a,x.a,I.a,E.a,w.a,T.a,R.a,en]],[3,a.j],a.w]),a._18(4608,X.l,X.k,[a.u]),a._18(4608,q.k,q.k,[]),a._18(4608,q.c,q.c,[]),a._18(4608,i.a,i.a,[]),a._18(4608,s.a,s.a,[]),a._18(4608,s.b,s.b,[]),a._18(512,X.b,X.b,[]),a._18(512,q.j,q.j,[]),a._18(512,q.d,q.d,[]),a._18(512,q.i,q.i,[]),a._18(512,un.a,un.a,[]),a._18(512,un.b,un.b,[]),a._18(512,v,v,[]),a._18(256,an.a,_,[])])})},280:function(n,t,l){"use strict";function e(n){return u._29(2,[u._25(402653184,1,{_fixedContent:0}),u._25(402653184,2,{_scrollContent:0}),(n()(),u._6(0,[[1,0],["fixedContent",1]],null,1,"div",[["class","fixed-content"]],null,null,null,null,null)),u._19(null,0),(n()(),u._6(0,[[2,0],["scrollContent",1]],null,1,"div",[["class","scroll-content"]],null,null,null,null,null)),u._19(null,1),u._19(null,2)],null,null)}l.d(t,"a",function(){return a}),t.b=e;var u=l(0),a=(l(21),l(1),l(3),l(9),l(8),l(33),l(5),l(20),u._3({encapsulation:2,styles:[],data:{}}))},281:function(n,t,l){"use strict";function e(n){return u._29(0,[(n()(),u._6(0,null,null,1,"div",[["class","toolbar-background"]],null,null,null,null,null)),u._4(278528,null,0,a.h,[u.s,u.t,u.k,u.E],{klass:[0,"klass"],ngClass:[1,"ngClass"]},null),(n()(),u._6(0,null,null,8,"button",[["class","back-button"],["ion-button","bar-button"]],[[8,"hidden",0]],[[null,"click"]],function(n,t,l){var e=!0;return"click"===t&&(e=!1!==n.component.backButtonClick(l)&&e),e},o.b,o.a)),u._4(278528,null,0,a.h,[u.s,u.t,u.k,u.E],{klass:[0,"klass"],ngClass:[1,"ngClass"]},null),u._4(1097728,null,0,r.a,[[8,"bar-button"],i.a,u.k,u.E],null,null),(n()(),u._6(0,null,0,2,"ion-icon",[["class","back-button-icon"],["role","img"]],[[2,"hide",null]],null,null,null,null)),u._4(278528,null,0,a.h,[u.s,u.t,u.k,u.E],{klass:[0,"klass"],ngClass:[1,"ngClass"]},null),u._4(147456,null,0,s.a,[i.a,u.k,u.E],{name:[0,"name"]},null),(n()(),u._6(0,null,0,2,"span",[["class","back-button-text"]],null,null,null,null,null)),u._4(278528,null,0,a.h,[u.s,u.t,u.k,u.E],{klass:[0,"klass"],ngClass:[1,"ngClass"]},null),(n()(),u._27(null,["",""])),u._19(null,0),u._19(null,1),u._19(null,2),(n()(),u._6(0,null,null,2,"div",[["class","toolbar-content"]],null,null,null,null,null)),u._4(278528,null,0,a.h,[u.s,u.t,u.k,u.E],{klass:[0,"klass"],ngClass:[1,"ngClass"]},null),u._19(null,3)],function(n,t){var l=t.component;n(t,1,0,"toolbar-background","toolbar-background-"+l._mode);n(t,3,0,"back-button","back-button-"+l._mode);n(t,6,0,"back-button-icon","back-button-icon-"+l._mode),n(t,7,0,l._bbIcon);n(t,9,0,"back-button-text","back-button-text-"+l._mode);n(t,15,0,"toolbar-content","toolbar-content-"+l._mode)},function(n,t){var l=t.component;n(t,2,0,l._hideBb),n(t,5,0,u._20(t,7)._hidden),n(t,10,0,l._backText)})}l.d(t,"a",function(){return c}),t.b=e;var u=l(0),a=l(16),o=(l(39),l(40)),r=l(19),i=l(1),s=l(41),c=(l(8),l(5),l(20),u._3({encapsulation:2,styles:[],data:{}}))},282:function(n,t,l){"use strict";function e(n){return u._29(2,[(n()(),u._6(0,null,null,2,"div",[["class","toolbar-title"]],null,null,null,null,null)),u._4(278528,null,0,a.h,[u.s,u.t,u.k,u.E],{klass:[0,"klass"],ngClass:[1,"ngClass"]},null),u._19(null,0)],function(n,t){n(t,1,0,"toolbar-title","toolbar-title-"+t.component._mode)},null)}l.d(t,"a",function(){return o}),t.b=e;var u=l(0),a=l(16),o=(l(117),l(1),l(53),l(39),u._3({encapsulation:2,styles:[],data:{}}))},286:function(n,t,l){"use strict";l.d(t,"a",function(){return a}),l.d(t,"b",function(){return o});var e=l(4),u=(l(0),l(74)),a=function(n){function t(){var t=null!==n&&n.apply(this,arguments)||this;return t.FileTransferErrorCode={FILE_NOT_FOUND_ERR:1,INVALID_URL_ERR:2,CONNECTION_ERR:3,ABORT_ERR:4,NOT_MODIFIED_ERR:5},t}return Object(e.__extends)(t,n),t.prototype.create=function(){return new o},t}(u.f);a=Object(e.__decorate)([Object(u.g)({pluginName:"FileTransfer",plugin:"cordova-plugin-file-transfer",pluginRef:"FileTransfer",repo:"https://github.com/apache/cordova-plugin-file-transfer",platforms:["Amazon Fire OS","Android","Browser","iOS","Ubuntu","Windows","Windows Phone"]})],a);var o=function(){function n(){!0===Object(u.h)("FileTransfer",null,"FileTransfer")&&(this._objectInstance=new FileTransfer)}return n.prototype.upload=function(n,t,l,e){},n.prototype.download=function(n,t,l,e){},n.prototype.onProgress=function(n){this._objectInstance.onprogress=n},n.prototype.abort=function(){},n}();Object(e.__decorate)([Object(u.c)({successIndex:2,errorIndex:3}),Object(e.__metadata)("design:type",Function),Object(e.__metadata)("design:paramtypes",[String,String,Object,Boolean]),Object(e.__metadata)("design:returntype",Promise)],o.prototype,"upload",null),Object(e.__decorate)([Object(u.c)({successIndex:2,errorIndex:3}),Object(e.__metadata)("design:type",Function),Object(e.__metadata)("design:paramtypes",[String,String,Boolean,Object]),Object(e.__metadata)("design:returntype",Promise)],o.prototype,"download",null),Object(e.__decorate)([Object(u.e)({sync:!0}),Object(e.__metadata)("design:type",Function),Object(e.__metadata)("design:paramtypes",[Function]),Object(e.__metadata)("design:returntype",void 0)],o.prototype,"onProgress",null),Object(e.__decorate)([Object(u.c)({sync:!0}),Object(e.__metadata)("design:type",Function),Object(e.__metadata)("design:paramtypes",[]),Object(e.__metadata)("design:returntype",void 0)],o.prototype,"abort",null),o=Object(e.__decorate)([Object(u.g)({plugin:"cordova-plugin-file-transfer",pluginName:"FileTransfer"}),Object(e.__metadata)("design:paramtypes",[])],o)},288:function(n,t,l){"use strict";function e(n){return i._29(0,[(n()(),i._6(0,[[1,0],["textInput",1]],null,1,"input",[["class","text-input"],["dir","auto"]],[[8,"type",0],[1,"aria-labelledby",0],[1,"min",0],[1,"max",0],[1,"step",0],[1,"autocomplete",0],[1,"autocorrect",0],[8,"placeholder",0],[8,"disabled",0],[8,"readOnly",0]],[[null,"input"],[null,"blur"],[null,"focus"],[null,"keydown"]],function(n,t,l){var e=!0,u=n.component;return"input"===t&&(e=!1!==u.onInput(l)&&e),"blur"===t&&(e=!1!==u.onBlur(l)&&e),"focus"===t&&(e=!1!==u.onFocus(l)&&e),"keydown"===t&&(e=!1!==u.onKeydown(l)&&e),e},null,null)),i._4(278528,null,0,s.h,[i.s,i.t,i.k,i.E],{klass:[0,"klass"],ngClass:[1,"ngClass"]},null)],function(n,t){n(t,1,0,"text-input","text-input-"+t.component._mode)},function(n,t){var l=t.component;n(t,0,0,l._type,l._labelId,l.min,l.max,l.step,l.autocomplete,l.autocorrect,l.placeholder,l._disabled,l._readonly)})}function u(n){return i._29(0,[(n()(),i._6(0,[[1,0],["textInput",1]],null,1,"textarea",[["class","text-input"]],[[1,"aria-labelledby",0],[1,"autocomplete",0],[1,"autocorrect",0],[8,"placeholder",0],[8,"disabled",0],[8,"readOnly",0]],[[null,"input"],[null,"blur"],[null,"focus"],[null,"keydown"]],function(n,t,l){var e=!0,u=n.component;return"input"===t&&(e=!1!==u.onInput(l)&&e),"blur"===t&&(e=!1!==u.onBlur(l)&&e),"focus"===t&&(e=!1!==u.onFocus(l)&&e),"keydown"===t&&(e=!1!==u.onKeydown(l)&&e),e},null,null)),i._4(278528,null,0,s.h,[i.s,i.t,i.k,i.E],{klass:[0,"klass"],ngClass:[1,"ngClass"]},null)],function(n,t){n(t,1,0,"text-input","text-input-"+t.component._mode)},function(n,t){var l=t.component;n(t,0,0,l._labelId,l.autocomplete,l.autocorrect,l.placeholder,l._disabled,l._readonly)})}function a(n){return i._29(0,[(n()(),i._6(0,null,null,1,"button",[["class","text-input-clear-icon"],["clear",""],["ion-button",""],["tabindex","-1"],["type","button"]],null,[[null,"click"],[null,"mousedown"]],function(n,t,l){var e=!0,u=n.component;return"click"===t&&(e=!1!==u.clearTextInput(l)&&e),"mousedown"===t&&(e=!1!==u.clearTextInput(l)&&e),e},c.b,c.a)),i._4(1097728,null,0,d.a,[[8,""],_.a,i.k,i.E],{clear:[0,"clear"]},null)],function(n,t){n(t,1,0,"")},null)}function o(n){return i._29(0,[(n()(),i._6(0,null,null,0,"div",[["class","input-cover"]],null,[[null,"touchstart"],[null,"touchend"],[null,"mousedown"],[null,"mouseup"]],function(n,t,l){var e=!0,u=n.component;return"touchstart"===t&&(e=!1!==u._pointerStart(l)&&e),"touchend"===t&&(e=!1!==u._pointerEnd(l)&&e),"mousedown"===t&&(e=!1!==u._pointerStart(l)&&e),"mouseup"===t&&(e=!1!==u._pointerEnd(l)&&e),e},null,null))],null,null)}function r(n){return i._29(2,[i._25(671088640,1,{_native:0}),(n()(),i._0(16777216,null,null,1,null,e)),i._4(16384,null,0,s.j,[i.O,i.K],{ngIf:[0,"ngIf"]},null),(n()(),i._0(16777216,null,null,1,null,u)),i._4(16384,null,0,s.j,[i.O,i.K],{ngIf:[0,"ngIf"]},null),(n()(),i._0(16777216,null,null,1,null,a)),i._4(16384,null,0,s.j,[i.O,i.K],{ngIf:[0,"ngIf"]},null),(n()(),i._0(16777216,null,null,1,null,o)),i._4(16384,null,0,s.j,[i.O,i.K],{ngIf:[0,"ngIf"]},null)],function(n,t){var l=t.component;n(t,2,0,!l._isTextarea),n(t,4,0,l._isTextarea),n(t,6,0,l._clearInput),n(t,8,0,l._useAssist)},null)}l.d(t,"a",function(){return p}),t.b=r;var i=l(0),s=l(16),c=l(40),d=l(19),_=l(1),p=(l(120),l(3),l(14),l(8),l(21),l(18),l(17),l(9),i._3({encapsulation:2,styles:[],data:{}}))},295:function(n,t,l){"use strict";l.d(t,"a",function(){return a});var e=l(4),u=(l(0),l(74)),a=function(n){function t(){var t=null!==n&&n.apply(this,arguments)||this;return t.DestinationType={DATA_URL:0,FILE_URI:1,NATIVE_URI:2},t.EncodingType={JPEG:0,PNG:1},t.MediaType={PICTURE:0,VIDEO:1,ALLMEDIA:2},t.PictureSourceType={PHOTOLIBRARY:0,CAMERA:1,SAVEDPHOTOALBUM:2},t.PopoverArrowDirection={ARROW_UP:1,ARROW_DOWN:2,ARROW_LEFT:4,ARROW_RIGHT:8,ARROW_ANY:15},t.Direction={BACK:0,FRONT:1},t}return Object(e.__extends)(t,n),t.prototype.getPicture=function(n){},t.prototype.cleanup=function(){},t}(u.f);Object(e.__decorate)([Object(u.a)({callbackOrder:"reverse"}),Object(e.__metadata)("design:type",Function),Object(e.__metadata)("design:paramtypes",[Object]),Object(e.__metadata)("design:returntype",Promise)],a.prototype,"getPicture",null),Object(e.__decorate)([Object(u.a)({platforms:["iOS"]}),Object(e.__metadata)("design:type",Function),Object(e.__metadata)("design:paramtypes",[]),Object(e.__metadata)("design:returntype",Promise)],a.prototype,"cleanup",null),a=Object(e.__decorate)([Object(u.g)({pluginName:"Camera",plugin:"cordova-plugin-camera",pluginRef:"navigator.camera",repo:"https://github.com/apache/cordova-plugin-camera",platforms:["Android","BlackBerry 10","Browser","Firefox OS","iOS","Ubuntu","Windows","Windows Phone 8"]})],a)}});